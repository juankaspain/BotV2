# ═════════════════════════════════════════════════════════════════════
# BotV2 - Environment Variables Template
# Copy this file to .env and fill with your actual values
# ═════════════════════════════════════════════════════════════════════

# USAGE:
# 1. Copy this file: cp .env.example .env
# 2. Fill in your actual values (never commit .env to git)
# 3. Ensure all REQUIRED variables are set before running

# ═════════════════════════════════════════════════════════════════════
# DATABASE CONFIGURATION
# ═════════════════════════════════════════════════════════════════════

# PostgreSQL Configuration (REQUIRED)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DATABASE=botv2
POSTGRES_USER=botv2_user
POSTGRES_PASSWORD=your_secure_password_here_min_8_chars

# Redis Configuration (REQUIRED for rate limiting and caching)
# Redis is now REQUIRED for:
# - Rate limiting (Flask-Limiter backend)
# - Session management
# - Caching (optional but recommended)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ═════════════════════════════════════════════════════════════════════
# EXCHANGE API KEYS
# ═════════════════════════════════════════════════════════════════════

# Polymarket API (REQUIRED for production)
# Get your API key from: https://polymarket.com/
POLYMARKET_API_KEY=your_polymarket_api_key_here
POLYMARKET_API_SECRET=your_polymarket_api_secret_here
POLYMARKET_BASE_URL=https://clob.polymarket.com

# Binance API (OPTIONAL - for crypto trading)
# Get your API key from: https://www.binance.com/en/my/settings/api-management
BINANCE_API_KEY=
BINANCE_API_SECRET=
BINANCE_TESTNET=false

# Coinbase Pro API (OPTIONAL)
# Get credentials from: https://www.coinbase.com/settings/api
COINBASE_API_KEY=
COINBASE_API_SECRET=
COINBASE_PASSPHRASE=

# Kraken API (OPTIONAL)
# Get API key from: https://www.kraken.com/u/security/api
KRAKEN_API_KEY=
KRAKEN_API_SECRET=

# Finst API (PREPARATORY - API not yet available as of January 2026)
# Website: https://finst.com
# Status: Waiting for Finst to release public developer API
# Contact: support@finst.com to request API access
#
# NOTE: Leave these blank for now. When Finst releases their API:
#   1. Create an account at https://finst.com
#   2. Navigate to API settings (when available)
#   3. Generate API key and secret
#   4. Fill in the values below
#   5. Set finst.enabled=true in settings.yaml
#
FINST_API_KEY=
FINST_API_SECRET=
FINST_TESTNET=false

# ═════════════════════════════════════════════════════════════════════
# NOTIFICATIONS
# ═════════════════════════════════════════════════════════════════════

# Telegram Bot (OPTIONAL - for alerts)
# Get your token from: @BotFather on Telegram
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# Slack Webhooks (OPTIONAL - for team notifications)
# Create webhook at: https://api.slack.com/messaging/webhooks
SLACK_WEBHOOK_URL=
SLACK_CHANNEL=#botv2-alerts

# Email Notifications (OPTIONAL - via SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USE_TLS=true
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@botv2.local
SMTP_TO=alerts@yourdomain.com

# Discord Webhook (OPTIONAL)
DISCORD_WEBHOOK_URL=

# ═════════════════════════════════════════════════════════════════════
# SECURITY & AUTHENTICATION
# ═════════════════════════════════════════════════════════════════════

# Flask Environment (REQUIRED)
# Values: development | production
# - development: HTTPS disabled, allows localhost HTTP, weaker security for testing
# - production: HTTPS enforced, strict security headers, rate limiting active
# IMPORTANT: ALWAYS use 'production' for remote deployments
FLASK_ENV=production

# Secret Key for JWT/Sessions (REQUIRED)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
# Or: openssl rand -hex 32
# IMPORTANT: Use different keys for dev/staging/production
# NEVER commit this key to git
SECRET_KEY=generate_random_32_char_secret_key_here

# Dashboard Authentication (REQUIRED for production)
# HTTP Basic Authentication credentials
# 
# Password Requirements:
# - Development: min 8 characters
# - Production: min 16 characters, mixed case, numbers, symbols
# - Never use common passwords (admin, password123, etc.)
# - Rotate every 90 days
#
# Generate strong password:
#   openssl rand -base64 16
#   python -c "import secrets; print(secrets.token_urlsafe(16))"
#
DASHBOARD_USERNAME=admin
DASHBOARD_PASSWORD=change_this_strong_password_min_16_chars_for_production

# API Authentication (REQUIRED if exposing API)
API_KEY=your_internal_api_key_here
API_SECRET=your_internal_api_secret_here

# Encryption Key (OPTIONAL - for encrypting sensitive data at rest)
ENCRYPTION_KEY=

# ═════════════════════════════════════════════════════════════════════
# SECURITY FEATURES (v2.0+)
# ═════════════════════════════════════════════════════════════════════

# Rate Limiting Configuration
# Powered by: Flask-Limiter with Redis backend
# 
# Default Limits (per IP):
# - Global: 10 requests/minute
# - API endpoints: 20 requests/minute
# - Export/Reports: 5 requests/minute
# - Health check: Unlimited (for Docker)
# - WebSocket: Unlimited (real-time updates)
#
# Rate limiting REQUIRES Redis to be running
# If Redis is unavailable, rate limiting is disabled (fails open)
#
RATE_LIMIT_ENABLED=true
RATE_LIMIT_CALLS=10
RATE_LIMIT_PERIOD=60

# HTTPS Enforcement
# Powered by: Flask-Talisman
#
# Production (FLASK_ENV=production):
#   - Automatic HTTP → HTTPS redirect
#   - Strict-Transport-Security (HSTS) header (1 year)
#   - Content-Security-Policy (CSP) headers
#   - X-Frame-Options: DENY (clickjacking protection)
#   - X-Content-Type-Options: nosniff
#   - X-XSS-Protection: 1; mode=block
#   - Referrer-Policy: no-referrer
#
# Development (FLASK_ENV=development):
#   - HTTPS enforcement DISABLED
#   - Allows localhost HTTP testing
#   - Self-signed certificates accepted
#
# SSL Certificate Setup (Production):
#   1. Get free cert: sudo certbot certonly --standalone -d your-domain.com
#   2. Certs location: /etc/letsencrypt/live/your-domain.com/
#   3. Configure Nginx reverse proxy (see docs/SECURITY.md)
#   4. Or run Flask with SSL: --ssl-context=(cert.pem,key.pem)

# Security Headers (automatically applied in production)
# These are configured in src/dashboard/web_app.py
# No additional environment variables needed

# ═════════════════════════════════════════════════════════════════════
# MONITORING & LOGGING
# ═════════════════════════════════════════════════════════════════════

# Sentry (OPTIONAL - for error tracking)
# Get DSN from: https://sentry.io/
SENTRY_DSN=
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Datadog (OPTIONAL - for metrics and APM)
DATADOG_API_KEY=
DATADOG_APP_KEY=
DATADOG_SITE=datadoghq.com

# Prometheus (OPTIONAL - metrics export)
PROMETHEUS_PORT=9090
PROMETHEUS_ENABLED=false

# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=logs/botv2.log
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5

# ═════════════════════════════════════════════════════════════════════
# APPLICATION SETTINGS
# ═════════════════════════════════════════════════════════════════════

# System Configuration
BOTV2_ENV=production
ENVIRONMENT=development

# Trading Mode (paper, live)
# IMPORTANT: Use 'paper' for testing, 'live' only when ready for real trading
TRADING_MODE=paper

# Initial Capital (in EUR)
INITIAL_CAPITAL=3000

# Trading Interval (seconds)
TRADING_INTERVAL=60

# Debug Mode
DEBUG=false

# Flask/Dashboard Settings
FLASK_APP=src.dashboard.web_app
DASHBOARD_HOST=0.0.0.0
DASHBOARD_PORT=8050

# ═════════════════════════════════════════════════════════════════════
# EXTERNAL SERVICES (OPTIONAL)
# ═════════════════════════════════════════════════════════════════════

# Twitter API (OPTIONAL - for sentiment analysis)
# Get credentials from: https://developer.twitter.com/
TWITTER_API_KEY=
TWITTER_API_SECRET=
TWITTER_BEARER_TOKEN=
TWITTER_ACCESS_TOKEN=
TWITTER_ACCESS_SECRET=

# OpenAI API (OPTIONAL - for AI-powered features)
# Get API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=
OPENAI_ORG_ID=
OPENAI_MODEL=gpt-4

# Anthropic Claude API (OPTIONAL)
ANTHROPIC_API_KEY=

# CoinGecko API (OPTIONAL - for crypto price data)
COINGECKO_API_KEY=

# Alpha Vantage (OPTIONAL - for stock market data)
ALPHA_VANTAGE_API_KEY=

# ═════════════════════════════════════════════════════════════════════
# ADVANCED CONFIGURATION
# ═════════════════════════════════════════════════════════════════════

# Cache Settings
CACHE_ENABLED=true
CACHE_TTL=300

# Backtesting
BACKTEST_START_DATE=2023-01-01
BACKTEST_END_DATE=2025-12-31

# Risk Management Overrides (use with caution)
# CIRCUIT_BREAKER_LEVEL_1=-5.0
# CIRCUIT_BREAKER_LEVEL_2=-10.0
# CIRCUIT_BREAKER_LEVEL_3=-15.0
# MAX_POSITION_SIZE=0.15
# MIN_POSITION_SIZE=0.01

# ═════════════════════════════════════════════════════════════════════
# CLOUD PROVIDER CREDENTIALS (if deploying to cloud)
# ═════════════════════════════════════════════════════════════════════

# AWS Credentials (OPTIONAL)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=eu-west-1

# Google Cloud (OPTIONAL)
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json
GCP_PROJECT_ID=

# Azure (OPTIONAL)
AZURE_SUBSCRIPTION_ID=
AZURE_TENANT_ID=
AZURE_CLIENT_ID=
AZURE_CLIENT_SECRET=

# ═════════════════════════════════════════════════════════════════════
# QUICK START EXAMPLES
# ═════════════════════════════════════════════════════════════════════

# DEVELOPMENT SETUP (localhost testing):
# ────────────────────────────────────────
# cp .env.example .env
# 
# # Edit .env:
# FLASK_ENV=development
# DASHBOARD_PASSWORD="test123"
# POSTGRES_PASSWORD="postgres"
# REDIS_HOST=localhost
# SECRET_KEY="$(python -c 'import secrets; print(secrets.token_urlsafe(32))')"
# 
# docker compose up -d
# # Access: http://localhost:8050 (user: admin, pass: test123)

# PRODUCTION SETUP (remote server):
# ────────────────────────────────────────
# cp .env.example .env
# 
# # Edit .env:
# FLASK_ENV=production
# DASHBOARD_PASSWORD="$(openssl rand -base64 16)"
# POSTGRES_PASSWORD="$(openssl rand -base64 16)"
# REDIS_HOST=botv2-redis  # Docker service name
# SECRET_KEY="$(openssl rand -hex 32)"
# 
# # Setup SSL certificate:
# sudo certbot certonly --standalone -d your-domain.com
# 
# docker compose up -d
# # Access: https://your-domain.com:8050 (HTTPS enforced)

# ═════════════════════════════════════════════════════════════════════
# END OF FILE
# ═════════════════════════════════════════════════════════════════════

# SECURITY REMINDERS:
# 1. NEVER commit .env to git (already in .gitignore)
# 2. Use strong passwords:
#    - Production: min 16 characters, mixed case, numbers, symbols
#    - Development: min 8 characters (still avoid weak passwords)
# 3. Rotate secrets regularly (every 90 days recommended)
# 4. Use different credentials for dev/staging/production
# 5. Enable 2FA on all exchange accounts
# 6. Store backups of credentials securely (password manager)
# 7. FLASK_ENV=production REQUIRED for remote deployments
# 8. Redis REQUIRED for rate limiting to work
# 9. Setup SSL certificates for HTTPS (Let's Encrypt recommended)
# 10. Monitor security logs: docker compose logs botv2-dashboard | grep -i "failed\|limit"
#
# SECURITY DOCUMENTATION:
# - Full security guide: docs/SECURITY.md
# - Deployment checklist: docs/DEPLOYMENT.md (if exists)
# - Troubleshooting: docs/SECURITY.md#troubleshooting
#
# FINST SPECIFIC NOTES:
# - Finst API is not yet available (as of January 2026)
# - Keep checking https://finst.com for API announcements
# - When API launches, update src/exchanges/finst_adapter.py
# - Set finst.api_available=true in settings.yaml
# - Test thoroughly with small amounts first
# - Finst offers 0.15% trading fees (very competitive)
#
# SUPPORT:
# - Security issues: juanka755@hotmail.com (subject: [SECURITY])
# - General support: https://github.com/juankaspain/BotV2/issues
# - Documentation: https://github.com/juankaspain/BotV2/tree/main/docs